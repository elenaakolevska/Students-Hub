<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–°–º–µ—Å—Ç—É–≤–∞—ö–∞</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body>

<!-- Navbar -->
<div th:replace="fragments/navbar :: navbar"></div>

<section>
    <div class="section-header">
        <h2>–°–º–µ—Å—Ç—É–≤–∞—ö–∞</h2>
    </div>

    <div class="add-new-container">
        <a href="/housing-posts/create" class="add-btn">+ –î–æ–¥–∞–¥–∏ —Å–º–µ—Å—Ç—É–≤–∞—ö–µ</a>
    </div>

    <form method="get" th:action="@{/housing-posts}" class="filter-form">
        <label for="municipality">–§–∏–ª—Ç–µ—Ä –ø–æ –æ–ø—à—Ç–∏–Ω–∞:</label>
        <select name="municipality" id="municipality">
            <option value="">–°–∏—Ç–µ</option>
            <option th:each="mun : ${municipalities}"
                    th:value="${mun}"
                    th:text="${mun}"
                    th:selected="${param.municipality == mun}">
            </option>
        </select>
        <button type="submit">–§–∏–ª—Ç—Ä–∏—Ä–∞—ò</button>
    </form>


    <div class="card-container">
        <div class="card" th:each="post : ${posts}">
            <img th:src="${post.images[0]}" alt="–°–ª–∏–∫–∞ –æ–¥ —Å–º–µ—Å—Ç—É–≤–∞—ö–µ" class="card-img"/>

            <div class="card-body">
                <h3 th:text="${post.title}">–ù–∞—Å–ª–æ–≤</h3>

                <p><strong>–õ–æ–∫–∞—Ü–∏—ò–∞:</strong> <span th:text="${post.location}"/></p>
                <p><strong>–û–ø—à—Ç–∏–Ω–∞:</strong> <span th:text="${post.municipality}"/></p>

                <p>
                    <strong>–¶–µ–Ω–∞:</strong>
                    <span th:text="${post.price} + ' –¥–µ–Ω.'">–¶–µ–Ω–∞</span>
                </p>

                <p><strong>–û–ø–∏—Å:</strong> <span th:text="${post.description}"/></p>

                <p>
                    <strong>–°—Ç–∞—Ç—É—Å:</strong>
                    <span th:text="${post.found} ? '–í–µ—ú–µ –Ω–∞—ò–¥–µ–Ω–æ' : '–°–ª–æ–±–æ–¥–Ω–æ'"></span>
                </p>

                <a th:href="@{'/housing-posts/' + ${post.id}}" class="details-btn">–í–∏–¥–∏ –¥–µ—Ç–∞–ª–∏</a>

                <form th:action="@{/favorites/favorites/add/{postId}(postId=${post.id})}" method="get" style="margin-top: 10px;">
                    <button type="submit" class="favorite-btn">üíñ –î–æ–¥–∞—ò –≤–æ –æ–º–∏–ª–µ–Ω–∏</button>
                </form>
            </div>
        </div>
    </div>
</section>

<div th:replace="fragments/footer :: footer"></div>

</body>
</html>
